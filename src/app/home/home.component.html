<div class="container mx-auto px-4 py-6">
  <form [formGroup]="myForm" (ngSubmit)="onSubmit()" class="space-y-6">
    <!-- Sélecteur de méthode HTTP -->
    <div class="flex space-x-2 items-center">
      <select
        formControlName="httpMethod"
        class="border border-gray-300 rounded-md shadow-sm"
      >
        <option *ngFor="let method of httpMethods" [value]="method">
          {{ method }}
        </option>
      </select>

      <!-- URL Field -->
      <input
        type="text"
        formControlName="url"
        placeholder=" URL"
        class="flex-1 border border-gray-300 rounded-md shadow-sm"
      />
    </div>

    <!-- Section for Headers -->
    <div class="border-t border-gray-200 pt-4">
      <h2 class="text-lg font-semibold text-gray-700">Headers</h2>
      <div formArrayName="headers">
        <div
          *ngFor="let header of headers.controls; let i = index"
          [formGroupName]="i"
          class="flex space-x-2 mt-2"
        >
          <!-- Key Field -->
          <input
            type="text"
            formControlName="key"
            class="flex-1 border border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
            placeholder=" Key"
          />

          <!-- Value Field -->
          <input
            type="text"
            formControlName="value"
            class="flex-1 border border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
            placeholder=" Value"
          />

          <!-- Remove Button -->
          <button
            type="button"
            class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"
            (click)="deleteHeader(i)"
          >
            X
          </button>
        </div>
      </div>
      <button
        type="button"
        class="mt-2 inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700"
        (click)="addHeader()"
      >
        Add header
      </button>
    </div>

    <!-- Section for Query Params -->
    <div class="border-t border-gray-200 pt-4">
      <h2 class="text-lg font-semibold text-gray-700">Query Params</h2>
      <div formArrayName="queryParams">
        <div
          *ngFor="let param of queryParams.controls; let i = index"
          [formGroupName]="i"
          class="flex space-x-2 mt-2"
        >
          <!-- Key Field -->
          <input
            type="text"
            formControlName="key"
            class="flex-1 border border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
            placeholder=" Key"
          />

          <!-- Value Field -->
          <input
            type="text"
            formControlName="value"
            class="flex-1 border border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
            placeholder=" Value"
          />

          <!-- Remove Button -->
          <button
            type="button"
            class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"
            (click)="deleteQueryParam(i)"
          >
            X
          </button>
        </div>
      </div>
      <button
        type="button"
        class="mt-2 inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700"
        (click)="addQueryParams()"
      >
        Add query param
      </button>
    </div>

    <div class="text-right">
      <button
        type="submit"
        class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700"
      >
        Submit
      </button>
    </div>
  </form>

  <div class="mt-4 p-4 border border-gray-300 rounded">
    <h3 class="font-semibold">HTTP Response :</h3>
    <pre>{{ responseData }}</pre>
  </div>
</div>
